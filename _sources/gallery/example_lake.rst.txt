
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "gallery/example_lake.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_gallery_example_lake.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_example_lake.py:


Caspian / lake
===============

.. GENERATED FROM PYTHON SOURCE LINES 6-12

.. code-block:: Python


    from datetime import datetime, timedelta
    from opendrift.models.oceandrift import OceanDrift
    from opendrift.readers import reader_shape
    import cartopy








.. GENERATED FROM PYTHON SOURCE LINES 13-16

The default GSHHG landmask reader classifies lakes
(e.g. Caspian Sea) as land and not water.
For simulations in lakes, we can use a custom reader for lakes only.

.. GENERATED FROM PYTHON SOURCE LINES 16-21

.. code-block:: Python

    level = 'h'  # using high resolution coastline
    reader_lakes = reader_shape.Reader.from_shpfiles(
        f'{cartopy.config['data_dir']}/shapefiles/gshhs/{level}/GSHHS_{level}_L2.shp',
        invert=True)  # Inverting since inside of polygons is water (lake) and not land.








.. GENERATED FROM PYTHON SOURCE LINES 22-23

Disabling the default landmask reader, and using the above reader instead

.. GENERATED FROM PYTHON SOURCE LINES 23-32

.. code-block:: Python

    o = OceanDrift(loglevel=20)
    o.add_reader(reader_lakes)
    o.set_config('general:use_auto_landmask', False)  # To use custom landmask instead
    o.set_config('environment:constant:x_sea_water_velocity', 1)
    o.set_config('drift:horizontal_diffusivity', 100)
    o.seed_elements(lon=48.819, lat=44.959, radius=5000, number=100, time=datetime.now())

    o.run(steps=10)
    o.plot(fast=False, buffer=2)



.. image-sg:: /gallery/images/sphx_glr_example_lake_001.png
   :alt: OpenDrift - OceanDrift 2025-09-18 10:07 to 2025-09-18 20:07 UTC (11 steps)
   :srcset: /gallery/images/sphx_glr_example_lake_001.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    10:07:34 INFO    opendrift:568: OpenDriftSimulation initialised (version 1.14.3 / v1.14.3-6-g4ace059)
    10:07:34 INFO    opendrift.models.basemodel.environment:229: Fallback values will be used for the following variables which have no readers: 
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    y_sea_water_velocity: 0.000000
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    sea_surface_height: 0.000000
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    x_wind: 0.000000
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    y_wind: 0.000000
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    upward_sea_water_velocity: 0.000000
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    ocean_vertical_diffusivity: 0.000000
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    sea_surface_wave_significant_height: 0.000000
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    sea_surface_wave_stokes_drift_x_velocity: 0.000000
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    sea_surface_wave_stokes_drift_y_velocity: 0.000000
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    ocean_mixed_layer_thickness: 50.000000
    10:07:34 INFO    opendrift.models.basemodel.environment:232:    sea_floor_depth_below_sea_level: 10000.000000
    10:07:34 INFO    opendrift:1778: Skipping environment variable ocean_vertical_diffusivity because of condition ['drift:vertical_mixing', 'is', False]
    10:07:34 INFO    opendrift:1778: Skipping environment variable ocean_mixed_layer_thickness because of condition ['drift:vertical_mixing', 'is', False]
    10:07:34 INFO    opendrift:1789: Storing previous values of element property lon because of condition (('general:coastline_action', 'in', ['stranding', 'previous']), 'or', ('general:seafloor_action', 'in', ['previous']))
    10:07:34 INFO    opendrift:1789: Storing previous values of element property lat because of condition (('general:coastline_action', 'in', ['stranding', 'previous']), 'or', ('general:seafloor_action', 'in', ['previous']))
    10:07:34 INFO    opendrift:1797: Storing previous values of environment variable sea_surface_height because of condition ['drift:vertical_advection', 'is', True]
    10:07:34 INFO    opendrift:944: Using existing reader for land_binary_mask to move elements to ocean
    10:07:34 INFO    opendrift.readers.reader_shape:149: Building KDTree from 6601 geometries with buffer distance 0.000000e+00
    10:07:39 INFO    opendrift:2085: 2025-09-18 10:07:34.418748 - step 1 of 10 - 100 active elements (0 deactivated)
    10:07:39 INFO    opendrift:2085: 2025-09-18 11:07:34.418748 - step 2 of 10 - 100 active elements (0 deactivated)
    10:07:39 INFO    opendrift:2085: 2025-09-18 12:07:34.418748 - step 3 of 10 - 100 active elements (0 deactivated)
    10:07:39 INFO    opendrift:2085: 2025-09-18 13:07:34.418748 - step 4 of 10 - 100 active elements (0 deactivated)
    10:07:39 INFO    opendrift:2085: 2025-09-18 14:07:34.418748 - step 5 of 10 - 100 active elements (0 deactivated)
    10:07:39 INFO    opendrift:2085: 2025-09-18 15:07:34.418748 - step 6 of 10 - 100 active elements (0 deactivated)
    10:07:39 INFO    opendrift:2085: 2025-09-18 16:07:34.418748 - step 7 of 10 - 100 active elements (0 deactivated)
    10:07:39 INFO    opendrift:2085: 2025-09-18 17:07:34.418748 - step 8 of 10 - 100 active elements (0 deactivated)
    10:07:39 INFO    opendrift:2085: 2025-09-18 18:07:34.418748 - step 9 of 10 - 100 active elements (0 deactivated)
    10:07:39 INFO    opendrift:2085: 2025-09-18 19:07:34.418748 - step 10 of 10 - 100 active elements (0 deactivated)

    (<GeoAxes: title={'center': 'OpenDrift - OceanDrift\n2025-09-18 10:07 to 2025-09-18 20:07 UTC (11 steps)'}>, <Figure size 1100x755.105 with 1 Axes>)




.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 29.140 seconds)


.. _sphx_glr_download_gallery_example_lake.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: example_lake.ipynb <example_lake.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: example_lake.py <example_lake.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: example_lake.zip <example_lake.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
