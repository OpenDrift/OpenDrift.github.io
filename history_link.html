

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>History &mdash; OpenDrift  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="_static/sg_gallery-rendered-html.css?v=1277b6f3" />
      <link rel="stylesheet" type="text/css" href="_static/theme_overrides.css" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installing OpenDrift" href="install.html" />
    <link rel="prev" title="Introduction to OpenDrift" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            OpenDrift
              <img src="_static/opendrift_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction to OpenDrift</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-13-0">2025-02-11 / Release v1.13.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-12-0">2024-11-26 / Release v1.12.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-13">2024-07-24 / Release v1.11.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-12">2024-07-05 / Release v1.11.12</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-11">2024-07-04 / Release v1.11.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-10">2024-06-27 / Release v1.11.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-9">2024-06-27 / Release v1.11.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-8">2024-06-26 / Release v1.11.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-7">2024-06-25 / Release v1.11.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-6">2024-06-24 / Release v1.11.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-5">2024-06-18 / Release v1.11.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-4">2024-06-14 / Release v1.11.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-3">2024-06-14 / Release v1.11.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-2">2024-04-02 / Release v1.11.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-1">2024-01-25 / Release v1.11.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-11-0">2023-12-12 / Release v1.11.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-10-7">2023-05-02 / Release v1.10.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-10-6">2023-03-29 / Release v1.10.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-10-5">2023-01-26 / Release v1.10.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-10-4">2022-11-16 / Release v1.10.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-10-3">2022-11-16 / Release v1.10.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-10-2">2022-11-16 / Release v1.10.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-10-1">2022-09-27 / Release v1.10.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-10-0">2022-09-26 / Release v1.10.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-9-0">2022-03-18 / Release v1.9.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-8-4">2022-02-28 / Release v1.8.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-8-3">2022-01-31 / Release v1.8.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-8-2">2022-01-31 / Release v1.8.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-8-1">2022-01-27 / Release v1.8.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-8-0">2022-01-06 / Release v1.8.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-7-3">2021-11-08 / Release v1.7.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-7-2">2021-10-27 / Release v1.7.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-7-1">2021-09-01 / Release v1.7.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-7-0">2021-08-30 / Release v1.7.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-6-0">2021-05-03 / Release v1.6.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-5-6">2021-02-15 / Release v1.5.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-5-5">2021-01-26 / Release v1.5.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-5-4">2021-01-18 / Release v1.5.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-5-3">2021-01-15 / Release v1.5.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-5-2">2021-01-14 / Release v1.5.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-5-1">2021-01-05 / Release v1.5.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-5-0">2021-01-04 / Release v1.5.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-4-2">2020-11-01 / Release v1.4.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-4-1">2020-10-31 / Release v1.4.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-4-0">2020-10-27 / Release v1.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-3-3">2020-10-15 / Release v1.3.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-3-2">2020-08-21 / Release v1.3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-3-1">2020-07-03 / Release v1.3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-3-0">2020-06-24 / Release v1.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-2-3">2020-06-12 / Release v1.2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-2-2">2020-06-08 / Release v1.2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-2-1">2020-05-14 / Release v1.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-2-0">2020-01-08 / Release v1.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#release-v1-1-1">2019-11-27 / Release v1.1.1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing OpenDrift</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance in OpenDrift</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory/index.html">Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory/index.html#drift-in-the-ocean">Drift in the Ocean</a></li>
<li class="toctree-l1"><a class="reference internal" href="choosing_a_model.html">How to choose which model to use</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_a_new_model.html">How to write a new module</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="oil_types.html">Oil types</a></li>
<li class="toctree-l1"><a class="reference internal" href="interaction_with_coastline.html">Interaction with coastline</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Using OpenDrift in a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">Graphical User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Services using OpenDrift</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenDrift</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">History</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/history_link.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="history">
<h1>History<a class="headerlink" href="#history" title="Link to this heading"></a></h1>
<section id="release-v1-13-0">
<h2>2025-02-11 / Release v1.13.0<a class="headerlink" href="#release-v1-13-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Major internal change: recarray <code class="docutils literal notranslate"><span class="pre">self.history</span></code> is replaced with Xarray dataset <code class="docutils literal notranslate"><span class="pre">self.result</span></code>, with some minor API changes:</p>
<ul>
<li><p>The method <code class="docutils literal notranslate"><span class="pre">run()</span></code> now returns a pointer to this dataset, i.e. one can type <code class="docutils literal notranslate"><span class="pre">ds</span> <span class="pre">=</span> <span class="pre">o.run()</span></code>  and subsequently analyse the results with e.g. <a class="reference external" href="https://opendrift.github.io/trajan/">TrajAn</a>. The plotting/analysis methods within OpenDrift works as before, but operates now on <code class="docutils literal notranslate"><span class="pre">self.result</span></code> instead of <code class="docutils literal notranslate"><span class="pre">self.history</span></code>.</p></li>
<li><p>The method <code class="docutils literal notranslate"><span class="pre">get_lonlats()</span></code> has been removed, as one can now do simply <code class="docutils literal notranslate"><span class="pre">self.result.lon</span></code> to get longitude as an Xarray DataArray</p></li>
<li><p>The method <code class="docutils literal notranslate"><span class="pre">get_property()</span></code> is obsolete for the same reason. It now issues a warning that this method will be removed in the next version. New syntax is to use <code class="docutils literal notranslate"><span class="pre">self.result.&lt;property&gt;</span></code> where property is any element properties (lon, lat, status, length etc) or environment variables (wind, currents, …), or coordinate variables <code class="docutils literal notranslate"><span class="pre">time</span></code> and  <code class="docutils literal notranslate"><span class="pre">trajectory</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.result.time</span></code> is a numpy64 array, which can be converted to python datetime with <code class="docutils literal notranslate"><span class="pre">pandas.to_datetime(self.result.time).to_pydatetime()</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">get_time_array()</span></code> issues a warning that it will soon be removed, in favor of above syntax.</p></li>
</ul>
</li>
<li><p>Attribute <code class="docutils literal notranslate"><span class="pre">self.steps_output</span></code> is replaced by <code class="docutils literal notranslate"><span class="pre">len(self.result.time)</span></code></p></li>
<li><p>Removed methods <code class="docutils literal notranslate"><span class="pre">opendrift.open_xarray</span></code> and <code class="docutils literal notranslate"><span class="pre">io_netcdf.import_file_xarrray</span></code>, as <code class="docutils literal notranslate"><span class="pre">opendrift.open</span></code> now also imports lazily with Xarray.</p></li>
</ul>
</li>
<li><p>Saved netCDF files are now compressed with Zlib level 6, and are typically 70% smaller than before.</p>
<ul>
<li><p>Data types for all element properties and environment variables are consistently <cite>numpy.float32</cite> internally in OpenDrift, with the benfit of NaN as masked values.</p></li>
<li><p>In output netCDF files, element properties are encoded according to the attribute <code class="docutils literal notranslate"><span class="pre">data_type</span></code> as specified in the actual ElementType class.</p></li>
</ul>
</li>
<li><p>linewidth can be specified for animations, whenever trajectories are shown</p></li>
<li><p>Generic netCDF reader and ROMS readers now use a new common method <cite>reader.open_dataset_opendrift</cite> to open Xarray dataset from files or URLS, and also decoding time.</p></li>
<li><p>Dynamic detection of dimension order in generic reader also for split blocks for global readers. ReaderBlock also shifts x-coordinate for global readers. General improvements for global simulations crossing both dateline and 0-meridian.</p></li>
<li><p>Reinserted hack to decode time in ROMS-croco files, which are not CF compatible</p></li>
<li><p>Updated logging mechanism. Can now send log to both file and console.</p></li>
<li><p>Replaced mambaforge with miniforge3 in circleCI config</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_up_map</span></code> now stores <code class="docutils literal notranslate"><span class="pre">crs_plot</span></code> and <code class="docutils literal notranslate"><span class="pre">crs_lonlat</span></code> for later user. Landmask is now obtained on Mercator/plot grid (and not lonlat-grid) when <code class="docutils literal notranslate"><span class="pre">fast=True</span></code></p></li>
<li><p>Faster plotting:</p>
<ul>
<li><p>Getting land polygons from roaring_landmask if full resolution coastline. Also clipping polygons to plot extent, and caching per extent. This gives large speedup, in particular for animations.</p></li>
<li><p>Using RoaringLandmask to check/screen if there is any land within plot area, otherwise skip plotting of vector coastline.</p></li>
</ul>
</li>
<li><p>Removed obsolete method <code class="docutils literal notranslate"><span class="pre">wind_drift_factor_from_trajectory_lw</span></code>. Could eventually be rebuilt with/around TrajAn.</p></li>
<li><p>Removed method <code class="docutils literal notranslate"><span class="pre">disable_vertical_motion</span></code></p></li>
<li><p>Removed obsolete method <code class="docutils literal notranslate"><span class="pre">ShipDrift.import_ascii_format</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Leeway.export_ascii</span></code> now limits to 5 decimals for longitudes and latitudes. Still some minor differences are sometimes seen in last decimal, thus there are two versions of output reference file in test suite.</p></li>
</ul>
</section>
<section id="release-v1-12-0">
<h2>2024-11-26 / Release v1.12.0<a class="headerlink" href="#release-v1-12-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Adapting OpenOil to Adios &gt; 1.2</p></li>
<li><p>Replaced Mambaforge with Miniforge in installation instructions</p></li>
<li><p><cite>write_netcdf_density_map</cite> now produces files with increasing time dimension also for backward simulations</p></li>
<li><p>Fixed bug in OceanDrift, terminal velocity not updated if vertical mixing deactivated. Thanks to Joao Lencart e Silva.</p></li>
<li><p>reader_landmask: use sequential version</p></li>
<li><p>Added possibility to add Stokes drift to Leeway model</p></li>
<li><p>Added aliases mapping ocean_vertical_salt_diffusivity (and corresponding for tracer) to ocean_vertical_diffusivity</p></li>
<li><p>Added some aliases for sea_surface_height</p></li>
<li><p>Forcing datasets:</p>
<ul>
<li><p>Replaced obsolete HYCOM thredds url with new ESPCD-v02</p></li>
<li><p>Changing Arome arctic 12h to 6_h</p></li>
</ul>
</li>
<li><p>reader_netCDF_CF_generic:</p>
<ul>
<li><p>if lon/lat arrays are repeated 1D arrays, these are now reduced to 1D, and reader becomes projected with lonlat</p></li>
<li><p>Fixed bug with dateline</p></li>
<li><p>Update for datasets where projection is available, but coordinate variable is missing</p></li>
<li><p>Allowing for ensemble collection with a single member (invisible in coordinates)</p></li>
</ul>
</li>
<li><p>Improved CF-compliance for netCDF output files</p></li>
<li><p>Cleaning of ROMS native reader</p></li>
<li><p>Fix for plotting Antarctica coastline, as well as ice sheet-water boorder on maps/plots</p></li>
</ul>
</section>
<section id="release-v1-11-13">
<h2>2024-07-24 / Release v1.11.13<a class="headerlink" href="#release-v1-11-13" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Ensuring that Leeway ascii output contains lat/lon without [brackets] regardless of seeding method used</p></li>
</ul>
</section>
<section id="release-v1-11-12">
<h2>2024-07-05 / Release v1.11.12<a class="headerlink" href="#release-v1-11-12" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>New internal method to avid trying non-applicable readers (e.g. copernicus reader for files/URLs, or netCDF-readers for copernicus products ids)</p></li>
</ul>
</section>
<section id="release-v1-11-11">
<h2>2024-07-04 / Release v1.11.11<a class="headerlink" href="#release-v1-11-11" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>New feature by TheSylex to move stranded particles closer to the actual coastline with a precision given by config setting <cite>general:coastline_approximation_precision</cite> in unit of degrees (1deg approx 111 km)</p></li>
<li><p>Major updates to OpenBerg iceberg drift model (Achref Othmani, Lenny Hucher)</p></li>
<li><p>Changed location to Norway for oil HEIDRUN AARE 2023</p></li>
<li><p>Replacing matplotlib.cm.get_cmap with matplotlib.colormaps[color], ready for matplotlib 3.9</p></li>
<li><p>Requiring Trajan &gt;= 0.6.3 for Numpy &gt;= 2.0</p></li>
</ul>
</section>
<section id="release-v1-11-10">
<h2>2024-06-27 / Release v1.11.10<a class="headerlink" href="#release-v1-11-10" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Using now standard env variable names COPERNICUSMARINE_SERVICE_USERNAME and COPERNICUSMARINE_SERVICE_PASSWORD for reader_copernicus. Env variable COPERNICUSMARINE_CACHE_DIRECTORY can be set to empty string to disable caching.</p></li>
</ul>
</section>
<section id="release-v1-11-9">
<h2>2024-06-27 / Release v1.11.9<a class="headerlink" href="#release-v1-11-9" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>New feature to blend model field with point measurement (Ugo Martinez)</p></li>
<li><p>Hack in generic reader to make sure wind from ECMWF files is at 10m height</p></li>
<li><p>Raising now error if all elements are seeded on land</p></li>
</ul>
</section>
<section id="release-v1-11-8">
<h2>2024-06-26 / Release v1.11.8<a class="headerlink" href="#release-v1-11-8" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Raising now error if all elements are seeded on land</p></li>
</ul>
</section>
<section id="release-v1-11-7">
<h2>2024-06-25 / Release v1.11.7<a class="headerlink" href="#release-v1-11-7" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Decreased config_level of general:simulation_name to BASIC, due to wrong interpretation of config_level by Drifty</p></li>
</ul>
</section>
<section id="release-v1-11-6">
<h2>2024-06-24 / Release v1.11.6<a class="headerlink" href="#release-v1-11-6" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Credentials for copernicusmarine client can now be stored in environment variables COPERNICUSMARINE_USER and COPERNICUSMARINE_PASSWORD, as alternative to .netrc file</p></li>
<li><p>Removed GRIB reader from list included in add_readers_from_list</p></li>
<li><p>Replaced two obsolete URLS for HYCOM (tds.hycom.org) with new aggregate from ncei.noaa.gov</p></li>
<li><p>Removed double quote from docstring, as giving problems for Drifty</p></li>
<li><p>Updated max water content of new oils</p></li>
<li><p>OpenDriftGUI now logs to file in addition to GUI window</p></li>
<li><p>config general:simulation_name is now ESSENTIAL, meaning that it will appear on front page of GUI</p></li>
</ul>
</section>
<section id="release-v1-11-5">
<h2>2024-06-18 / Release v1.11.5<a class="headerlink" href="#release-v1-11-5" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Leeway config categori capsizing (bool) renamed to processes:capsizing</p></li>
<li><p>adios&lt;1.2 removed from pyproject.toml, as this it not found on conda</p></li>
</ul>
</section>
<section id="release-v1-11-4">
<h2>2024-06-14 / Release v1.11.4<a class="headerlink" href="#release-v1-11-4" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Updating requirements in pyproject.toml</p></li>
<li><p>config setting general:simulation_name is now ESSENTIAL, to be on fron page of GUI</p></li>
</ul>
</section>
<section id="release-v1-11-3">
<h2>2024-06-14 / Release v1.11.3<a class="headerlink" href="#release-v1-11-3" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>reader.plot() now takes time as optional argument for plotting background field at specific time</p></li>
<li><p>Using now product_id instead of OPeNDAP URL for CMEMS datasets, and using copernicusmarineclient through new reader_copernicusmarine. username/password can be stored in netrc-file with machine name equal to <em>copernicusmarine</em> or <em>nrt.cmems-du.eu</em></p></li>
<li><p>Model property reguired_profiles_z_range is now replaced with config setting drift:profile_depth, and profiles are retrieved from surface to this depth. profiles_depth is now input parameter to get_environment, and not anymore a property of Environment class. prepare_run must now always call prepare_run of parent class, since profile_depth is copied to object in basemodel.prepare_run</p></li>
<li><p>get_variables_along_trajectory now also takes depth (z) as input parameter</p></li>
<li><p>updates to wetting/drying in ROMS reader (Kristin Thyng)</p></li>
<li><p>Fill value in output netCDF files is now set to NaN for floats and -999 for integers</p></li>
<li><p>Moving basereader.prepare() to variables.prepare(), as the former was overriding structured.prepare() due to multiple inheritance, and thus config <em>drift:max_speed</em> was not applied if config setting was made after reader was added. Also increasing <em>drift:max_speed</em> of OceanDrift from 1 to 2m/s</p></li>
<li><p>Leeway model now allows capsizing (and un-capsizing for backwards runs), with given probability and reduction of leeway coefficients when wind exceeds given threshold</p></li>
<li><p>New internal method simulation_direction() is 1 for forward runs, and -1 for backwards runs</p></li>
<li><p>First version of gaussian merging of model and point measurements (Ugo Martinez)</p></li>
<li><p>Added utility method open_mfdataset_overlap to create manual threds aggregates, and example_manual_aggregate to illustrate usage</p></li>
<li><p>Added new config type ‘str’ with properties min_length and max_length (default 64). Added generic config ‘general:simulation_name’ (default empty)</p></li>
<li><p>Changing &gt;= to &gt; in condition regarding at which timestep to export buffer to file</p></li>
<li><p>Added new oil, HEIDRUN AARE 2023</p></li>
</ul>
</section>
<section id="release-v1-11-2">
<h2>2024-04-02 / Release v1.11.2<a class="headerlink" href="#release-v1-11-2" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Proper handling of sea_surface_height implemented by Kristin Thyng. All subclasses of OceanDrift now have <cite>sea_surface_height</cite> (default 0) as new parameter. z=0 is always sea surface (including sea_surface_height), and seafloor is now where z = -(sea_floor_depth + sea_surface_height)</p></li>
<li><p>Improvements of ROMS reader by Kristin Thyng:</p>
<ul>
<li><p>Roppy-method <cite>sdepth</cite> (used by ROMS reader) now accounts for <cite>sea_surface_height</cite> (zeta).</p></li>
<li><p>Improved handling of rotation of vectors.</p></li>
<li><p>Interpolator can be saved/cached to file to save time on repeated simulations.</p></li>
<li><p>Improved handling of landmasks, for wetting-drying-applications.</p></li>
</ul>
</li>
<li><p>Added alternative biodegradation to OpenOil by specifying half_tiome [days], which can be different for slick and submerged droplets.</p></li>
<li><p>Memory usage is now logged once every timestep, and can be plotted after simulation with new method <cite>o.plot_memory_usage()</cite></p></li>
<li><p>Exporting directly to parquet file is now an alternative to netCDF (#1259, Achim Randelhoff)</p></li>
<li><p>The size and color of particles of animation and animation_profile methods can now be scaled with any element or environment property by specifying marker=&lt;property&gt;. Sizes can eventually be scaled by spcifying markersize_scaling. Transparency (alpha) can also be provided. Some examples are updated.</p></li>
<li><p>Bugfix for cases with no active particles at the same timestep as exporting to file (#1251, Lenny Hucher)</p></li>
<li><p>Bugfix for attibute of vertical coordinate in SCISM raeder (Calvin Quigley)</p></li>
<li><p>Can make faster and smaller animation by selcting frames as range or list (Manuel Aghito)</p></li>
<li><p>Updates to reader_netCDF_CF_generic:</p>
<ul>
<li><p>Now also rotating ensemble vectors from east/north to x/y</p></li>
<li><p>Now using dynamic instead of hardcoded order of dimensions</p></li>
<li><p>Removing unnecessary ensemble dimension for seafloor depth</p></li>
</ul>
</li>
<li><p>Now ending timer[total time] before finalizing output netCDF file, so that complete performance is included.</p></li>
</ul>
</section>
<section id="release-v1-11-1">
<h2>2024-01-25 / Release v1.11.1<a class="headerlink" href="#release-v1-11-1" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>ROMS reader can take xarray datasets (Rich Signell)</p></li>
<li><p>Norwegian oils: maximum water fractions are overriden with Sintef values.</p></li>
<li><p>set_config can take dictionary as input for faster setting of multiple options.</p></li>
<li><p>New example to illustrate new Copernicus Marine Client.</p></li>
</ul>
</section>
<section id="release-v1-11-0">
<h2>2023-12-12 / Release v1.11.0<a class="headerlink" href="#release-v1-11-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Norwegian oil data (json files) are moved from OpenDrift repository to <a class="reference external" href="https://github.com/OpenDrift/noaa-oil-data">https://github.com/OpenDrift/noaa-oil-data</a>, from where they are harvested to oils.xz.</p></li>
<li><p>adios_db is new dependency, and old oil methods are removed from openoil.py and companion scripts.</p></li>
<li><p>lazy_reader can now pass zarr auth info</p></li>
<li><p>Renamed OpenBerg to OpenBergOld, to give place for a new full-fledged ice berg drift model which includes thermodynamics</p></li>
<li><p>Order of initializing a simulation is now strict: configuration and adding readers must be done before seeding elements and starting simulation. Internally this is regulated by <em>modes</em>: [‘Config’, ‘Ready’, ‘Run’, ‘Result’] and use of decorators for when methods are applicable.</p></li>
<li><p>Related restructuring, including new Config and Environment classes, and renaming basemodel.py to basemodel/__init__.py. reset method is removed, and a clone method is intruduced instead.</p></li>
<li><p>drift:max_speed is now a config value. fallback_values it not anymore a cached dict, but must be retrieved from config. Updated all examples and tests to seed elements after config and readers</p></li>
<li><p>Several updates to ChemicalDrift module</p></li>
<li><p>Fixed bug related to rotation of east/north-oriented vectors from reader_netCDF_generic with projection of different orientation</p></li>
<li><p>Fixed bug for buffer size for negative time steps and readers with no time dimension</p></li>
<li><p>dbyte type landmask now allowed in ROMS reader</p></li>
<li><p>Removing u_eastward and v_northward from ROMS variable mappings, as these are wrongly rotated. Rotation should be fixed if these are re-inserted</p></li>
<li><p>Readers are now quarantined/discarded if they fail more than the number of times given by config readers:max_number_of_fails (default 1)</p></li>
<li><p>Added method plot_stokes_profile to plot vertical profiles of Stokes drift</p></li>
<li><p>Added standard_name aliases for baroclinic_x_sea_water_velocity, baroclinic_eastward_sea_water_velocity, and y/north counterparts</p></li>
<li><p>Added normal and lognormal droplet size distributions for subsea blowout (author Giles Fearon)</p></li>
<li><p>Fixed bug for solar_coeff in sealice model (author Julien Moreau)</p></li>
<li><p>vector_pairs_xy now also contains name of magnitude and direction_to components, i.e. 4 elements array (xname, yname, magnitude, direction_to). For future automatic conversion between x_comp,ycomp and speed,magnitude</p></li>
<li><p>More generic environment mapping methods, from vectors to magnitude/direction and vice versa. Need improvement formapping based on other mapped variables. Readerinfo now use get_variables_interpolated_xy instead of get_variables to report data at point</p></li>
<li><p>Fixed wrong distribution of angles when seeding with uniform distribution. Thanks to Oyvind Breivik for spotting.</p></li>
<li><p>oil_type can be decided at first seeding, but not changed at second seeding. I.e. as before, only a single oil type can be used for a simulation.</p></li>
</ul>
</section>
<section id="release-v1-10-7">
<h2>2023-05-02 / Release v1.10.7<a class="headerlink" href="#release-v1-10-7" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>CF projection info is now parsed with pyproj.CF.from_cf()</p></li>
<li><p>Fixed bug in rotate_variable_dict for rotated pole projection</p></li>
<li><p>netCDF generic reader now accepts Xarray Datasets in addition to filenames or URLs</p></li>
<li><p>ROMS reader now accepts also time variable named ‘bulk_time’ and unit of days. Added uwnd,uwind,vwnd,wvind,tair,wspd to mapping variables</p></li>
</ul>
</section>
<section id="release-v1-10-6">
<h2>2023-03-29 / Release v1.10.6<a class="headerlink" href="#release-v1-10-6" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Added five new oils to OpenOil/ADIOS. Mapped NJORD 1997 to NJORD 2002.</p></li>
<li><p>Temporary hack to let reader_netCDF_CF_generic read Zarr datasets</p></li>
<li><p>Particles in air (z&gt;0) are not stranded/deactivated when land_binary_mask==1</p></li>
<li><p>Updated Thredds URL to CMEMS wave model</p></li>
<li><p>Not dropping Vtransform in reader_ROMS_native when using MFDataset (wildcards). Thanks to Tianning Wu for spotting bug</p></li>
<li><p>GUI: Timezone CET can be chosen, and added button to copy netCDF outfile to selected folder</p></li>
</ul>
</section>
<section id="release-v1-10-5">
<h2>2023-01-26 / Release v1.10.5<a class="headerlink" href="#release-v1-10-5" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Multiple improvements to the chemicaldrift model.</p></li>
<li><p>Fix issue where oil type alias for ‘EKOFISK BLEND 2002’ did not work.</p></li>
<li><p>Leeway: number of elements now equal to length of lon,lat input array (if number not given).</p></li>
<li><p>Leeway: ASCII output gives small numerical difference on different platforms, presumably because of numerical errors.</p></li>
<li><p>Fixing bug in get_environment, where unmasked arrays of nan did not lead to call for more readers.</p></li>
<li><p>Add trajan as dependency.</p></li>
</ul>
</section>
<section id="release-v1-10-4">
<h2>2022-11-16 / Release v1.10.4<a class="headerlink" href="#release-v1-10-4" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Workaround in reader_netCDF_CF_generic to prevent wrong wind field from ECMWF model to be selected</p></li>
</ul>
</section>
<section id="release-v1-10-3">
<h2>2022-11-16 / Release v1.10.3<a class="headerlink" href="#release-v1-10-3" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fix paths in opendrift_gui.</p></li>
</ul>
</section>
<section id="release-v1-10-2">
<h2>2022-11-16 / Release v1.10.2<a class="headerlink" href="#release-v1-10-2" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Optimizations to reading results files.</p></li>
<li><p>ROMS reader improvements.</p></li>
<li><p>ChemD: many improvements.</p></li>
<li><p>Bugfixes.</p></li>
</ul>
</section>
<section id="release-v1-10-1">
<h2>2022-09-27 / Release v1.10.1<a class="headerlink" href="#release-v1-10-1" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Using cartopy shapes for full resolution again because of performance issues.</p></li>
<li><p>Unit of oil viscosity (which is kinematic viscosity) is now consistent.</p></li>
<li><p>When importing a subset in time, the number of actual active elements is now detected and used for initialization.</p></li>
</ul>
</section>
<section id="release-v1-10-0">
<h2>2022-09-26 / Release v1.10.0<a class="headerlink" href="#release-v1-10-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>OpenDrift and roaring-landmask is now available as conda packages in conda-forge.</p></li>
<li><p>Roaring landmask is now the only standard landmask provider. The <cite>extent</cite> and corners arguments
have been removed from the global_landmask reader. They have not been in use when roaring-landmask
was installed.</p></li>
<li><p>The land shapes included with roaring-landmask is used if full resolution is used during plotting. Otherwise the cartopy provider is used.</p></li>
<li><p><a class="reference external" href="https://github.com/OpenDrift/opendrift/commit/78f2bd491ddc554d018e8527f97430211aafbba4">Two bugs in OpenOil fixed by Giles Fearon</a>: in vertical mixing procedure, Temperature has wrong unit when calculating water density, and diameter was used instead of radius to calculate terminal velocity. This lead to moderate errors in vertical distribution of oil droplets: <a class="reference external" href="https://github.com/OpenDrift/opendrift/commit/457ed0ff263fb2cd51125cbc3df8c972e0b16fe7">https://github.com/OpenDrift/opendrift/commit/457ed0ff263fb2cd51125cbc3df8c972e0b16fe7</a></p></li>
<li><p>Fixed offset error in plotting of background fields on animations, which arose due to recent updates of matplotlib.</p></li>
<li><p>Added fix (suggested by user lyingTree) for problem when seeding small number of elements within polygons.</p></li>
<li><p><cite>figsize</cite> is new optional argument to plot and animation methods (default is 11 inches).</p></li>
<li><p>Possible to specify custom title for animation method.</p></li>
<li><p>Oil type is now retrieved from stored netCDF files from OpenOil simulations.</p></li>
<li><p>Fixed bug for readers with property <cite>always_valid=True</cite></p></li>
<li><p>Added boolean option show_trajectories to <cite>plot</cite> method.</p></li>
<li><p><cite>reader_netCDF_CF_generic</cite> does now only detect 1D-variables as x- and y-coordinates.</p></li>
<li><p>For animated drifters, trajectory is now shown only up to current time step.</p></li>
<li><p>Variables may now also be specified for <cite>add_readers_from_list</cite>.</p></li>
<li><p>Allowing more than one drifter-dictionary to be animated, if keyword <cite>drifter</cite> (previously named <cite>trajectory_dict</cite>)  is a list instead of dict.</p></li>
<li><p>New convenience method for structured readers to calculate ocean depth, area and volume within given coordinates.</p></li>
<li><p>Generic netCDF reader now raises an error of file/URL is (apparently) raw ROMS output.</p></li>
<li><p>ROMS native reader is now not rotating vectors with east/north in either variable or standard-name.</p></li>
<li><p>Updates to ROMS native reader: standard_name_mapping may be provided by user, and mask, coordinates and angle may all be read from eventual gridfile.</p></li>
<li><p>Added option to chose ensemble member in <cite>reader_netCDF_CF_generic</cite> (by user <cite>mateuszmatu</cite>).</p></li>
<li><p>An experimental drift model based on the Eulerian modeling scheme has been added.</p></li>
<li><p>It is now possible to combine readers using operators, e.g. to take the mean of two readers, or tune the intensity of a variable. See the <cite>example_reader_operators.py</cite> for an example.</p></li>
</ul>
</section>
<section id="release-v1-9-0">
<h2>2022-03-18 / Release v1.9.0<a class="headerlink" href="#release-v1-9-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Now using Cartopy &gt;= 0.20. Cartopy &lt; 0.20 is longer supported.</p></li>
<li><p>Updated thredds URL to Barents2.5 ocean model</p></li>
<li><p>ROMS native reader now detects variables having standard_name attribute</p></li>
<li><p>Using more explicit exceptions internally, e.g. OutsideSpatialCoverageError, CouldNotInitializeReaderError etc.</p></li>
<li><p>Added 7 Norwegian oils</p></li>
<li><p>roaring_landmask (written in Rust) is now installed as default (faster landmask checking)</p></li>
</ul>
</section>
<section id="release-v1-8-4">
<h2>2022-02-28 / Release v1.8.4<a class="headerlink" href="#release-v1-8-4" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed discarding of irrelevant readers, which was not working properly. Readers are now discarded if they do not cover simuation temporal or spatial coverage, or do not contain relevant variables</p></li>
<li><p>Updating/renaming global CMEMS MERCATOR thredds URL. Removing obsoleted CMEMS reader</p></li>
<li><p>Config setting drift:horizontal_diffusivity is changed from ADVANCED to BASIC, so that it is configurable from e.g. Drifty</p></li>
<li><p>Fixed bug preventing export of final time step if the final time_step output is not completed</p></li>
<li><p>Fixed bug in ShipDrift model: beta2 was not updated in loop, giving minor directional error</p></li>
<li><p>Fixed bug in ShipDrift model: left and right directions were swapped</p></li>
</ul>
</section>
<section id="release-v1-8-3">
<h2>2022-01-31 / Release v1.8.3<a class="headerlink" href="#release-v1-8-3" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Removing duplicate oils in OpenOil</p></li>
</ul>
</section>
<section id="release-v1-8-2">
<h2>2022-01-31 / Release v1.8.2<a class="headerlink" href="#release-v1-8-2" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Re-inserted missing oil UTGARD CONDENSATE 2021, and added mapping from EKOFISK BLEND 2002 to 2000</p></li>
</ul>
</section>
<section id="release-v1-8-1">
<h2>2022-01-27 / Release v1.8.1<a class="headerlink" href="#release-v1-8-1" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed bug in ShipDrift: erroneous direction used for wave forcing when Stokes drift was provided as forcing.</p></li>
<li><p>New methods to calculate Liu-Weissberg and DARPA skillscores</p></li>
<li><p>Blit is now an input parameter to animation, defaulting to False, as blitting destroys zorder (background field is always overlaid landmask)</p></li>
</ul>
</section>
<section id="release-v1-8-0">
<h2>2022-01-06 / Release v1.8.0<a class="headerlink" href="#release-v1-8-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The oil-library has been replaced with the new ADIOS database. Oils are
retrieved from <a class="reference external" href="https://adios.orr.noaa.gov/">adios.orr.noaa.gov</a>, but
shipped with OpenDrift. They will be updated occasionally. Additional oils
not yet included in ADIOS are also supplied with OpenDrift.</p></li>
<li><p>A custom oil can be specified to OpenOil as a JSON string in the format of
ADIOS. This means that if you want to use a new or updated oil from the ADIOS
database, you can download it as JSON and specify it manually.</p></li>
<li><p>The dependency on the oillibrary is now removed, and we should no longer have
any conda-specific package dependencies.</p></li>
<li><p>Faster writing of animations to file (mp4 and gif) using grab_frame and saving methods in matplotlib.animation writers</p></li>
<li><p>New element property <cite>current_drift_factor</cite> (default 1) to OceanDrift and submodels - allowing to move particles with a fraction of ocean current.</p></li>
<li><p>OpenOil and PlastDrift now inherits ElementType class from OceanDrift, instead of from Elements.PassiveTracer</p></li>
<li><p>Fixed <a class="reference external" href="https://github.com/OpenDrift/opendrift/commit/7c49edaea55a65f3781363457b504c5dd86f55b2">bug</a> for vertical mixing with depths below 255m</p></li>
<li><p>A new model <a class="reference internal" href="autoapi/opendrift/models/sealice/index.html#module-opendrift.models.sealice" title="opendrift.models.sealice"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sealice</span></code></a> has been added, written by <a class="reference external" href="https://github.com/Boorhin">Julien Moreau</a>.</p></li>
<li><p><a class="reference external" href="https://opendrift.github.io/_modules/opendrift/models/oceandrift.html#OceanDrift.machine_learning_correction">Machine learning correction</a> in OceanDrift model. Used for DARPA FFT Challenge, with machine learning data generated by Jean Rabault. Will be made avaiable for general use in future release.</p></li>
</ul>
</section>
<section id="release-v1-7-3">
<h2>2021-11-08 / Release v1.7.3<a class="headerlink" href="#release-v1-7-3" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>reader_from_url is now using requests instead of urllib, fixing problem with add_readers_from_list and .netrc authentication.</p></li>
<li><p>Hidden feature for <code class="docutils literal notranslate"><span class="pre">reader_netCDF_CF_generic</span></code>: if attributes <code class="docutils literal notranslate"><span class="pre">shift_x</span></code> and <code class="docutils literal notranslate"><span class="pre">shift_y</span></code> are defined, the returned fields are shifted this many meters in the x/y (or east/north) directions</p></li>
<li><p>parameter <code class="docutils literal notranslate"><span class="pre">show_particles</span></code> to plot() is now renamed to <code class="docutils literal notranslate"><span class="pre">show_elements</span></code>, as for animation()</p></li>
<li><p>Map bounds are now extended to cover also comparison simulations and any trajectory_dicts.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skip</span></code> and <code class="docutils literal notranslate"><span class="pre">scale</span></code> as input to plot() and animation() are now None, so that density and length and arrows are determined by matplotlib/quiver, unless overridden by user.</p></li>
<li><p>New method (<code class="docutils literal notranslate"><span class="pre">distance_between_trajectories</span></code>) to calculate distances between two trajectories, position by position.</p></li>
<li><p>Updates to <code class="docutils literal notranslate"><span class="pre">ChemicalDrift</span></code> model</p></li>
</ul>
</section>
<section id="release-v1-7-2">
<h2>2021-10-27 / Release v1.7.2<a class="headerlink" href="#release-v1-7-2" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fix bugs in selafin reader.</p></li>
<li><p>Several improvements to the SCHISM reader.</p></li>
<li><p>Add method for tuning windrift factor from observed drift.</p></li>
<li><p>Add method to retrieve environment variables (from given readers) along a given trajectory (e.g. a drifter).</p></li>
<li><p>Improved dateline handling in readers.</p></li>
<li><p>Fix dateline bug in landmask.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reader_netCDF_CF_generic</span></code>: if x, and y-coordinates are integer sequences, these are not anymore interpreted as projection coordinates.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reader_netCDF_CF_generic</span></code>: taking calendar name into acount when decoding time.</p></li>
<li><p>Leeway model: max_speed is increased to 5 m/s, avoiding obtaining too small data-blocks readers.</p></li>
<li><p>Leeway model ASCII export: if all elements are deactivated, write previous mean position, instead of NaN.</p></li>
<li><p>Improved Xarray-postprocessing (based on <cite>opendrift.open_xarray</cite>), as demonstrated in <code class="docutils literal notranslate"><span class="pre">example_river_runoff.py</span></code>. Aotomatic <code class="docutils literal notranslate"><span class="pre">analysis_file</span></code> is omitted.</p></li>
<li><p>Fixed problem related to mutating dictionary of readers when discarding.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">mixed_layer_depth</span></code> (default 50m) as environment variable of OceanDrift (and subclasses). This is used if <code class="docutils literal notranslate"><span class="pre">Sundby</span></code> or <code class="docutils literal notranslate"><span class="pre">Large</span></code> parameterizations of vertical turbulence is activated. A new config setting defines background diffusivity (default: <code class="docutils literal notranslate"><span class="pre">1.2e-5</span> <span class="pre">m2-s</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">origin_marker_name</span></code> can now be specified when seeding, and is stored as attributes <code class="docutils literal notranslate"><span class="pre">flag_meanings</span></code> to output variable <code class="docutils literal notranslate"><span class="pre">origin_marker</span></code>.</p></li>
<li><p>Quiver plots are now centered on pixels/grid, instead of at corner.</p></li>
</ul>
</section>
<section id="release-v1-7-1">
<h2>2021-09-01 / Release v1.7.1<a class="headerlink" href="#release-v1-7-1" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Using OilLibrary v4+noaa1.1.3</p></li>
</ul>
</section>
<section id="release-v1-7-0">
<h2>2021-08-30 / Release v1.7.0<a class="headerlink" href="#release-v1-7-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>New method <code class="docutils literal notranslate"><span class="pre">reader.shift_start_time(start_time)</span></code> to shift time coverage of reader</p></li>
<li><p>Density arrays calculated with method “get_density” for files opened with <cite>open_xarray</cite> can now be weighted with any property, or a user provided array. <cite>origin_marker is now a dimension of the arrays stored in analysis netCDF file. Made new method `get_density_timeseries</cite></p></li>
<li><p>ROMS native reader now accepts datasets where lon and lat are 1-dimensional</p></li>
<li><p>Fixed bug related to extrapolating 3D data to seafloor</p></li>
<li><p>Fixed bug with interpolation where latitude/y-coordinate is decreasing and not increasing (flipped upside down). Also fixed small inaccuracy of structured interpolation.</p></li>
<li><p>Fixed horizontal diffusion for backwards simulations</p></li>
<li><p>Enable the use of <a class="reference external" href="https://github.com/gauteh/roaring-landmask">roaring-landmask</a> as landmask reader, if installed.</p></li>
<li><p>Add Telemac / Selafin reader (requires telemac python scripts).</p></li>
</ul>
</section>
<section id="release-v1-6-0">
<h2>2021-05-03 / Release v1.6.0<a class="headerlink" href="#release-v1-6-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Reader environment mappings (deriving variables from others) can be activated with &gt;&gt;&gt; o.activate_environment_mapping(&lt;mapping_name&gt;). Method to derive wind components from <code class="docutils literal notranslate"><span class="pre">wind_speed</span></code> and <code class="docutils literal notranslate"><span class="pre">wind_from_direction</span> <span class="pre">/</span> <span class="pre">wind_to_direction</span></code> is activated by default.</p></li>
<li><p>New unstructured reader for SHYFEM model output</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">animation</span></code> and <code class="docutils literal notranslate"><span class="pre">animation_profile</span></code> methods may now use legend instead of colorbar for element properties</p></li>
<li><p>Arguments <code class="docutils literal notranslate"><span class="pre">color</span></code> to <code class="docutils literal notranslate"><span class="pre">animation()</span></code> and <code class="docutils literal notranslate"><span class="pre">linecolor</span></code> to <code class="docutils literal notranslate"><span class="pre">plot()</span></code> can now be arrays of length equal to the number of elements.</p></li>
<li><p>Improved mechanism for drifter/trajectory overlay on animations, as illustraded by <a class="reference internal" href="gallery/example_current_from_drifter.html"><span class="doc">example_current_from_drifter</span></a></p></li>
<li><p>Several improvements to module ChemicalDrift</p></li>
<li><p>For PlastDrift model, config <code class="docutils literal notranslate"><span class="pre">drift:vertical_mixing=False</span></code> still gave vertical entrainment for <code class="docutils literal notranslate"><span class="pre">mixingmodel=analytical</span></code>, but this is now changed. Sundby83 is now default model for vertical diffusivity in PlastDrift (was Large1994)</p></li>
<li><p>Increased valid range of current velocity components from 10 m/s to 15 m/s</p></li>
<li><p>Rotated pole projection (ob_tran) is now parsed from CF attributes by reader_netCDF_CF_generic.</p></li>
<li><p>Leeway jibing probability is calculated with exponential, giving more precise results for larger time steps. Generic arguments are removed from Leeway seeding method.</p></li>
<li><p>lon, lat are now positional arguments also in Leeway.seed_elements method. Leeway.seed_from_shapefile did nor work before this fix.</p></li>
<li><p>Config option <code class="docutils literal notranslate"><span class="pre">drift:lift_to_seafloor</span></code> is replaced by <code class="docutils literal notranslate"><span class="pre">general:seafloor_action</span></code>, analoguos to <code class="docutils literal notranslate"><span class="pre">general:coastline_action</span></code>.
Available options are <code class="docutils literal notranslate"><span class="pre">none</span></code>, <code class="docutils literal notranslate"><span class="pre">deactivate</span></code>, <code class="docutils literal notranslate"><span class="pre">lift_to_seafloor</span></code> as well as new option <code class="docutils literal notranslate"><span class="pre">previous</span></code> - moving elements back to previous position.</p></li>
<li><p>New method <code class="docutils literal notranslate"><span class="pre">get_trajectory_lengths</span></code> to calculate length and speeds along trajectories</p></li>
<li><p>Basemodel class does not anymore have a projection, internal coordinates are now always lon, lat</p></li>
<li><p>Color of ocean and landmask may now be overridden in plot- and animation methods with new input variables <code class="docutils literal notranslate"><span class="pre">land_color</span></code> and <code class="docutils literal notranslate"><span class="pre">ocean_color</span></code>. A new input dictionary <code class="docutils literal notranslate"><span class="pre">text</span></code> allows map annotations.</p></li>
<li><p>opendrift-landmask-data only loads mask once for each python process, reducing memory usage and improves performance where you run opendrift multiple times in the same script and process.</p></li>
</ul>
</section>
<section id="release-v1-5-6">
<h2>2021-02-15 / Release v1.5.6<a class="headerlink" href="#release-v1-5-6" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>New parallelisation of lonlat2xy for unprojected readers. The flag <code class="docutils literal notranslate"><span class="pre">&lt;reader&gt;.multiprocessing_fail</span></code> is replaced with <code class="docutils literal notranslate"><span class="pre">&lt;reader&gt;.__parallel_fail__</span></code></p></li>
<li><p>plot_property() can now save figure to file if filename is provided</p></li>
<li><p>netCDF attribute seed_geojson is now a GeoJSON FeatureCollection.</p></li>
<li><p>reader_netCDF_CF_generic does not anymore read 2D lon/lat variables if 1D x/y variables are detected, giving much faster initialisation.</p></li>
<li><p>General replacement of <code class="docutils literal notranslate"><span class="pre">np.float</span></code> and <code class="docutils literal notranslate"><span class="pre">np.int</span></code> with either <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">np.float32/64</span></code> and <code class="docutils literal notranslate"><span class="pre">np.int32/64</span></code>. np.float and np.int are deprecated in numpy 1.20.</p></li>
<li><p>Fixed bug occuring when interpolating environment_profiles in time, and the number of vertical layers in the ocean-model-block is larger at time1 than at time2</p></li>
</ul>
</section>
<section id="release-v1-5-5">
<h2>2021-01-26 / Release v1.5.5<a class="headerlink" href="#release-v1-5-5" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>New module LarvalFish, for fish eggs hatching into larvae with swimming behaviour</p></li>
<li><p>Sundby83 parameterisation of vertical diffusivity is now set to 0 below mixed layer depth (default 50m)</p></li>
<li><p>Deprecating seed argument <cite>oiltype</cite> in favor of <cite>oil_type</cite> in OpenOil. Warning is issued, but later this will become an error</p></li>
<li><p>Fixed problem with convolution of reader fields</p></li>
<li><p>Fixed newly introduced bug with Leeway ascii output file</p></li>
<li><p>Cleaned up some metadata output, and seeding arguments are written as list of GeoJSON strings to attribute <cite>seed_geojson</cite></p></li>
</ul>
</section>
<section id="release-v1-5-4">
<h2>2021-01-18 / Release v1.5.4<a class="headerlink" href="#release-v1-5-4" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>seed_cone also accepts time as list with single element</p></li>
<li><p>Min/max values are checked/masked also for ensemble data</p></li>
<li><p>reader_netCDF_CF_generic now detects lon/lat arrays also if their variable name equals lon/lat or longitude/latitude</p></li>
</ul>
</section>
<section id="release-v1-5-3">
<h2>2021-01-15 / Release v1.5.3<a class="headerlink" href="#release-v1-5-3" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed bug related to derived_variables (e.g. calculating x_wind, y_wind from windspeed, winddirection)</p></li>
</ul>
</section>
<section id="release-v1-5-2">
<h2>2021-01-14 / Release v1.5.2<a class="headerlink" href="#release-v1-5-2" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed problem with double or missing logging output</p></li>
<li><p>ShipDrift model now gives warning and not error if input parameter are outside bounds, and parameters are clipped to boundary values</p></li>
<li><p>Fixed problem with multiprocessing/parallelization of lonlat2xy for unprojected readers</p></li>
</ul>
</section>
<section id="release-v1-5-1">
<h2>2021-01-05 / Release v1.5.1<a class="headerlink" href="#release-v1-5-1" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>OilLibrary updated to version 1.1.3. Slightly different weathering results, and * is removed from oil names starting with GENERIC</p></li>
</ul>
</section>
<section id="release-v1-5-0">
<h2>2021-01-04 / Release v1.5.0<a class="headerlink" href="#release-v1-5-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Major restructuring of Basereader class. Readers now are sublasses of Structured, Unstructured or Continuous.</p></li>
<li><p>Built in GUI is improved with posibillity to adjust all config settings.</p></li>
<li><p>Some Leeway parameters are renamed from camelCase to camel_case, including: <code class="docutils literal notranslate"><span class="pre">jibeProbability</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">jibe_probability</span></code> and <code class="docutils literal notranslate"><span class="pre">objectType</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">object_type</span></code></p></li>
<li><p>Renamed config setting <code class="docutils literal notranslate"><span class="pre">drift:scheme</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">drift:advection_scheme</span></code></p></li>
</ul>
</section>
<section id="release-v1-4-2">
<h2>2020-11-01 / Release v1.4.2<a class="headerlink" href="#release-v1-4-2" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed bug in v1.4.1 that OpenOil and SedimentDrift had fallback_value of 0 for <cite>land_binary_mask</cite>, this shall be <cite>None</cite>.</p></li>
</ul>
</section>
<section id="release-v1-4-1">
<h2>2020-10-31 / Release v1.4.1<a class="headerlink" href="#release-v1-4-1" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Built in GUI is improved with docstrings and less hardcoding, based on new config mechanism, including a new bool setting <code class="docutils literal notranslate"><span class="pre">seed:seafloor</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">model.required_variables</span></code> is now a dictionary, which also includes the earlier <code class="docutils literal notranslate"><span class="pre">fallback_values</span></code>, <code class="docutils literal notranslate"><span class="pre">desired_variables</span></code> and <code class="docutils literal notranslate"><span class="pre">required_profiles</span></code>. Instead of providing fallback values directly in a dictionary, these shall now be provided through the config mechanism: <code class="docutils literal notranslate"><span class="pre">o.set_config('environment:fallback:&lt;variable&gt;',</span> <span class="pre">&lt;value&gt;)</span></code>. Correspondingly, config setting <code class="docutils literal notranslate"><span class="pre">environment:constant:&lt;variable&gt;</span></code> may be used to specify constant values for the same variables (overriding any other readers).</p></li>
<li><p><a class="reference external" href="https://opendrift.github.io/autoapi/opendrift/models/basemodel/index.html#opendrift.models.basemodel.OpenDriftSimulation.seed_elements">seed_elements</a> is simplified, by factoring out a new method <a class="reference external" href="https://opendrift.github.io/autoapi/opendrift/models/basemodel/index.html#opendrift.models.basemodel.OpenDriftSimulation.seed_cone">seed_cone</a></p></li>
</ul>
</section>
<section id="release-v1-4-0">
<h2>2020-10-27 / Release v1.4.0<a class="headerlink" href="#release-v1-4-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>New internal config mechanism, and configobj package is no longer needed. The user API (<code class="docutils literal notranslate"><span class="pre">get_config()</span></code>, <code class="docutils literal notranslate"><span class="pre">set_config()</span></code>) is unchanged, but model developers must use the <a class="reference external" href="https://opendrift.github.io/autoapi/opendrift/models/basemodel/index.html#opendrift.models.basemodel.OpenDriftSimulation._add_config">new mechanism</a> to add configuration settings.</p></li>
<li><p>Added new reader for static 2D fields (<code class="docutils literal notranslate"><span class="pre">reader_constant_2d.py</span></code>)</p></li>
<li><p>Xarray, Dask and Xhistogram are new requirements. New method <code class="docutils literal notranslate"><span class="pre">opendrift.open_xarray</span></code> to open an output netCDF file lazily, with possibility to e.g. calculate density arrays/plots from datasets to large to fit in memory.</p></li>
<li><p>New model chemicaldrift</p></li>
</ul>
</section>
<section id="release-v1-3-3">
<h2>2020-10-15 / Release v1.3.3<a class="headerlink" href="#release-v1-3-3" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>New seed method <code class="docutils literal notranslate"><span class="pre">seed_repeated_segment()</span></code></p></li>
<li><p>New method <code class="docutils literal notranslate"><span class="pre">animate_vertical_distribution()</span></code></p></li>
<li><p>Vertical mixing scheme is greatly simplified, and should be faster for large number of elements.</p></li>
<li><p>Vertical mixing is now disabled by default in OceanDrift, but enabled in all submodules (PelagicEggDrift, SedimentDrift, RadionuclideDrift, OpenOil)</p></li>
<li><p>Vertical diffusivity option <cite>zero</cite> is replaced with <code class="docutils literal notranslate"><span class="pre">constant</span></code>, which means using the fallback value.</p></li>
<li><p>New config setting <code class="docutils literal notranslate"><span class="pre">drift:horizontal_diffusivity</span></code>, providing time-step independent diffusion, in contrast to <code class="docutils literal notranslate"><span class="pre">drift:current_uncertainty</span></code> and <code class="docutils literal notranslate"><span class="pre">drift:wind_uncertainty</span></code></p></li>
<li><p>Readers may be initialised from a JSON string, where <cite>reader</cite> is name of reader module, and other parameters are forwarded to reader constructor, e.g.: <cite>{“reader”: “reader_cmems”, “dataset”: “global-analysis-forecast-phy-001-024-hourly-t-u-v-ssh”}</cite></p></li>
<li><p>CMEMS reader now obtains username/password from .netrc instead of environment variables. CMEMS-motuclient is added to environment.yml</p></li>
<li><p>CMEMS reader now takes dataset name and not product name as input, and it is possible to provide variable mapping.</p></li>
<li><p>NOAA ADIOS is now default (and only) option for oil weathering, as the “built in” oil weathering module (“basic”) is removed.</p></li>
<li><p>GUI is generalised, to be usable for any modules. This includes taking default seed options from <cite>config:seed:</cite> (e.g. m3_per_hour for OpenOil)</p></li>
</ul>
</section>
<section id="release-v1-3-2">
<h2>2020-08-21 / Release v1.3.2<a class="headerlink" href="#release-v1-3-2" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">vmax</span></code> value for animations with density array</p></li>
<li><p>Fixed animation marker color for deactivated elements</p></li>
<li><p>Introduced mechanism to store environment variables from previous time step</p></li>
<li><p>New element property <code class="docutils literal notranslate"><span class="pre">moving</span></code>, giving possibility to temporarily freeze elements, e.g. used for sedimentation and resuspension in SedimentDrift module</p></li>
<li><p>Improved robustness using Xarray in netCDF-readers. Xarray is still optional dependency, but is now tested on Travis</p></li>
<li><p>nc-time-axis is new dependency, providing support for cftime axis in matplotlib</p></li>
</ul>
</section>
<section id="release-v1-3-1">
<h2>2020-07-03 / Release v1.3.1<a class="headerlink" href="#release-v1-3-1" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>NOAA oil weathering model is now default choice in OpenOil</p></li>
<li><p>Bugfix in reader_netCDF_CF_generic for particles with negative longitudes combined with global datasets with longitudes from 0-360</p></li>
<li><p>Added module <code class="docutils literal notranslate"><span class="pre">SedimentDrift</span></code></p></li>
<li><p>Removed two options from OpenOil, with corresponding config parameters:</p>
<ul>
<li><p>Tkalich(2002) entrainment rate</p></li>
<li><p>Exponential droplet size distribution</p></li>
</ul>
</li>
<li><p>Renamed two config settings:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">processes:turbulentmixing</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">drift:vertical_mixing</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">processes:verticaladvection</span></code>-&gt; <code class="docutils literal notranslate"><span class="pre">drift:vertical_advection</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="release-v1-3-0">
<h2>2020-06-24 / Release v1.3.0<a class="headerlink" href="#release-v1-3-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>OceanDrift3D and OpenDrift3D have been merged into OceanDrift, and OpenOil3D has been merged into OpenOil. Thus OpenOil and OceanDrift are now 3D modules, but can still be configured for 2D drift.</p></li>
</ul>
</section>
<section id="release-v1-2-3">
<h2>2020-06-12 / Release v1.2.3<a class="headerlink" href="#release-v1-2-3" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Seed from shapefile: GDAL (ogr / osr) changed coordinate order, updates dependencies and call.</p></li>
</ul>
</section>
<section id="release-v1-2-2">
<h2>2020-06-08 / Release v1.2.2<a class="headerlink" href="#release-v1-2-2" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/vic1309">Victor de Aguiar</a>: <a class="reference internal" href="autoapi/opendrift/models/openoil/index.html#module-opendrift.models.openoil" title="opendrift.models.openoil"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Oil</span> <span class="pre">drift</span> <span class="pre">in</span> <span class="pre">sea</span> <span class="pre">ice</span></code></a> following Nordam et al., 2019, doi:10.1016/j.marpolbul.2019.01.019 (Sponsored by the Fram Centre in Tromsø, through the MIKON/OSMICO project).</p></li>
<li><p>OpenBerg module available from the GUI.</p></li>
<li><p>A generic shape reader for landmasks (use polygons directly or convenience method using shp files).</p></li>
<li><p>Drop rasterio dependency and include some significant thread-safety fixes for landmask-data.</p></li>
</ul>
</section>
<section id="release-v1-2-1">
<h2>2020-05-14 / Release v1.2.1<a class="headerlink" href="#release-v1-2-1" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Specifying a positive time step with a negative duration is now an error. Duration should
always be specified positive.</p></li>
</ul>
</section>
<section id="release-v1-2-0">
<h2>2020-01-08 / Release v1.2.0<a class="headerlink" href="#release-v1-2-0" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Basemap reader and basemap plotting removed</p></li>
<li><p>Minor improvements and bug fixes</p></li>
<li><p>Example scripts are now available in online <a class="reference internal" href="gallery/index.html"><span class="doc">gallery</span></a></p></li>
<li><p>Only a single conda environment (named “opendrift”). Fresh <a class="reference internal" href="install.html"><span class="doc">installation</span></a> is recommended.</p></li>
</ul>
</section>
<section id="release-v1-1-1">
<h2>2019-11-27 / Release v1.1.1<a class="headerlink" href="#release-v1-1-1" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Cartopy is used for plotting (with fast option only using raster, see <code class="xref py py-meth docutils literal notranslate"><span class="pre">opendrift.models.basemap.plot()</span></code>)</p></li>
<li><p>GSHHS full is used for a dedicated landmask reader (using full resolution always, possibly to <a class="reference internal" href="autoapi/opendrift/readers/reader_global_landmask/index.html#module-opendrift.readers.reader_global_landmask" title="opendrift.readers.reader_global_landmask"><code class="xref py py-mod docutils literal notranslate"><span class="pre">only</span> <span class="pre">use</span> <span class="pre">mask</span></code></a> for faster simulations)</p></li>
<li><p>New documentation at <a class="reference external" href="https://opendrift.github.io">https://opendrift.github.io</a></p></li>
<li><p>Conda packages at <a class="reference external" href="https://anaconda.org/OpenDrift/repo">https://anaconda.org/OpenDrift/repo</a></p></li>
<li><p>Pypi packages</p></li>
<li><p>OilLibrary also ported to Python 3</p></li>
<li><p><a class="reference external" href="https://github.com/python/devguide/pull/344">Python 2 support dropped</a> (but may still work for a while)</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Introduction to OpenDrift" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="install.html" class="btn btn-neutral float-right" title="Installing OpenDrift" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Knut-Frode Dagestad (knutfd@met.no) and Gaute Hope (gauteh@met.no)..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>